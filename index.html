<link rel="stylesheet" type="text/css" href="https://use.typekit.net/skn8ash.css">

<style>
    body {
  font-family: Termina, sans-serif;
  color: #111;
  background: #eee;
  overflow-x: hidden;
}

section {
  padding: 10vw;
  height: 100%;
  min-height: 500vh;
  overflow: visible;
  display: flex;
  flex-direction: column;
  justify-content: center;
  overflow-y: visible;
}

.credit {
  text-align: center;
  z-index: 999;
  font-size: 0.8rem;
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  writing-mode: vertical-rl;
  text-orientation: mixed;
}
.credit a {
  color: #fff;
}

* {
  box-sizing: border-box;
}

h1 {
  font-weight: 800;
  margin: 2rem auto;
  font-size: clamp(3vw, 2rem, 4rem);
  text-align: center;
  z-index: 999;
  max-width: 800px;
  mix-blend-mode: difference;
  pointer-events: none;
  color: white;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: grid;
  place-items: center;
}

.gallery {
  z-index: 1;
  display: flex;
  flex-direction: row;
  justify-content: center;
  width: 100%;
  height: 100%;
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  overflow: visible;
}
@media (max-width: 768px) {
  .gallery {
    width: 160%;
  }
}

.col {
  display: flex;
  flex: 1;
  flex-direction: column;
  width: 100%;
  align-self: flex-start;
  justify-self: flex-start;
}

.col:nth-child(2) {
  align-self: flex-end;
  justify-self: flex-end;
}

.image {
  width: 100%;
  filter: saturate(0);
  padding: 1rem;
}

.image:hover {
  z-index: 99999999999 !important;
  filter: saturate(1);
}

img {
  transition: 0.3s ease-out;
  overflow: hidden;
  box-shadow: 0 2.8px 2.2px rgba(0, 0, 0, 0.034), 0 6.7px 5.3px rgba(0, 0, 0, 0.048), 0 12.5px 10px rgba(0, 0, 0, 0.06), 0 22.3px 17.9px rgba(0, 0, 0, 0.072), 0 41.8px 33.4px rgba(0, 0, 0, 0.086), 0 100px 80px rgba(0, 0, 0, 0.12);
  width: 100%;
}
</style>

<section>
  <h1>Tap4Fun</h1>

  <h2 class="credit"><a href="https://www.tap4fun.com/" target="_blank">tap4fun</a></h2>
</section>

<div class="gallery">
  <div class="col">
    <div class="image">
      <img src="https://img0.baidu.com/it/u=3505506759,3972820864&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1682787600&t=bdf0138b39c6f77dd499d556b2425863" alt="">
    </div>
    <div class="image">
      <img src="https://img1.baidu.com/it/u=1057410847,4229971091&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500" alt="">
    </div>
      <div class="image">
      <img src="https://img2.baidu.com/it/u=1170483288,1844538983&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=800" alt="">
    </div>
    <div class="image">
      <img src="https://img0.baidu.com/it/u=1227372267,1129600888&fm=253&fmt=auto&app=138&f=JPEG?w=512&h=288" alt="">
    </div>
      <div class="image">
      <img src="https://img1.baidu.com/it/u=1131785442,1923749590&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500" alt="">
    </div>
      <div class="image">
      <img src="https://img2.baidu.com/it/u=1539891439,2394137949&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=800" alt="">
    </div>
      

      
  </div>
  <div class="col">
    <div class="image">
      <img src="https://img1.baidu.com/it/u=2338496585,396509279&fm=253&fmt=auto&app=120&f=JPEG?w=638&h=366" alt="">
    </div>
    <div class="image">
      <img src="https://img2.baidu.com/it/u=2624365620,2065511633&fm=253&fmt=auto&app=120&f=JPEG?w=889&h=500" alt="">
    </div>
    <div class="image">
      <img src="https://img1.baidu.com/it/u=523967898,1854078992&fm=253&fmt=auto&app=120&f=JPEG?w=889&h=500" alt="">
    </div>
      <div class="image"><img src="https://img1.baidu.com/it/u=4049200187,3038358657&fm=253&fmt=auto&app=138&f=GIF?w=582&h=260" alt="">
    </div>
      <div class="image">
      <img src="https://img1.baidu.com/it/u=2582062654,821242928&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=750" alt="">
    </div>
      
      <div class="image"><img src="https://img0.baidu.com/it/u=15918907,4134037107&fm=253&fmt=auto&app=120&f=JPEG?w=889&h=500" alt=""></div>
  </div>
    
    
  <div class="col">
    <div class="image">
      <img src="https://img1.baidu.com/it/u=3113637985,3228336901&fm=253&fmt=auto&app=138&f=JPEG?w=715&h=385" alt="">
    </div>
      
    <div class="image">
      <img src="https://img1.baidu.com/it/u=2582062654,821242928&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=750" alt="">
    </div>
    <div class="image">
      <img src="https://img0.baidu.com/it/u=2033524016,707572678&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=889" alt="">
    </div>
      <div class="image">
      <img src="https://img0.baidu.com/it/u=2951805429,4162635031&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=261" alt="">
    </div>
      <div class="image">
      <img src="https://img2.baidu.com/it/u=3828480638,1959013688&fm=253&fmt=auto&app=138&f=JPEG?w=533&h=300" alt="">
    </div>
  </div>
</div>

<script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>

<script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
    
<script>
    console.clear();

gsap.registerPlugin(ScrollTrigger);

const additionalY = { val: 0 };
let additionalYAnim;
let offset = 0;
const cols = gsap.utils.toArray(".col");

cols.forEach((col, i) => {
  const images = col.childNodes;

  // DUPLICATE IMAGES FOR LOOP
  images.forEach((image) => {
    var clone = image.cloneNode(true);
    col.appendChild(clone);
  });

  // SET ANIMATION
  images.forEach((item) => {
    let columnHeight = item.parentElement.clientHeight;
    let direction = i % 2 !== 0 ? "+=" : "-="; // Change direction for odd columns

    gsap.to(item, {
      y: direction + Number(columnHeight / 2),
      duration: 20,
      repeat: -1,
      ease: "none",
      modifiers: {
        y: gsap.utils.unitize((y) => {
          if (direction == "+=") {
            offset += additionalY.val;
            y = (parseFloat(y) - offset) % (columnHeight * 0.5);
          } else {
            offset += additionalY.val;
            y = (parseFloat(y) + offset) % -Number(columnHeight * 0.5);
          }

          return y;
        })
      }
    });
  });
});

const imagesScrollerTrigger = ScrollTrigger.create({
  trigger: "section",
  start: "top 50%",
  end: "bottom 50%",
  onUpdate: function (self) {
    const velocity = self.getVelocity();
    if (velocity > 0) {
      if (additionalYAnim) additionalYAnim.kill();
      additionalY.val = -velocity / 2000;
      additionalYAnim = gsap.to(additionalY, { val: 0 });
    }
    if (velocity < 0) {
      if (additionalYAnim) additionalYAnim.kill();
      additionalY.val = -velocity / 3000;
      additionalYAnim = gsap.to(additionalY, { val: 0 });
    }
  }
});

</script>
